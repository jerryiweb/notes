15. 数据库的高级查询

## 一. 高级查询

1. 使用 `| (OR)` 或 `& (AND)` 来实现 `where` 条件的高级查询，`where` 支持多个连缀：

   ```php
   Db::name('user')->where('username|email', 'like', '%jerry%')->where('price&uid', '>', 0)->select();
   ```

   ```mysql
   SELECT * FROM `tp_user` WHERE ( `username` LIKE '%ww%' OR `email` LIKE '%ww%' ) AND ( `price` > '0' AND `uid` > 0 )
   ```

2. 关联数组方式，可以在 `where` 进行多个字段的查询：

   ```php
   $users = Db::name('user')->where([
       ['id', '>', 0],
       ['status', '=', 1],
       ['price', '>=', 90],
       ['email', 'like', '%ww%']
   ])->select();
   ```

   ```mysql
   SELECT * FROM `tp_user` WHERE `id` > 0 AND `status` = 1 AND `price` >= '90' AND `email` LIKE '%ww%'
   ```

3. 条件字符串复杂组装，使用 `exp` ，就使用 `raw()` 方法：

   ```php
   $users = Db::name('user')->where([
       ['status', '=', 1],
       ['price', 'exp', Db::raw('>80')]
   ])->select();
   ```

   ```mysql
   SELECT * FROM `tp_user` WHERE `status` = 1 AND ( `price` >80 )
   ```

   
